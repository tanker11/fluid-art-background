<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluid Art Study 2 - Param√©terezett verzi√≥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: white;
        }

        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <canvas id="renderSurface"></canvas>

    <!-- Fluid-JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/fluid-canvas@latest"></script>

    <script>
        // ============================================
        // PARAM√âTEREK - Itt √°ll√≠that√≥k be a fizikai tulajdons√°gok
        // ============================================

        const PHYSICS_CONFIG = {
            // Szimul√°ci√≥ felbont√°sa (alacsonyabb = gyorsabb, 32-512)
            sim_resolution: 128,

            // Sz√≠nek felbont√°sa (magasabb = √©lesebb, 128-2048)
            dye_resolution: 512,

            // Sz√≠nveszt√©s m√©rt√©ke (0.9-1.0, magasabb = lassabb halv√°nyod√°s)
            dissipation: 0.998,

            // Sebess√©g lassul√°s m√©rt√©ke (0.9-1.0, magasabb = lassabb lassul√°s)
            velocity: 0.999,

            // Nyom√°s (0.0-1.0)
            pressure: 0.8,

            // Nyom√°s iter√°ci√≥k sz√°ma (10-50)
            pressure_iteration: 20,

            // √ñrv√©nyl√©s er≈ëss√©ge (0-50)
            curl: 10,

            // Emitter m√©ret (0.1-3.0) - l√©trehozott foltok m√©rete
            emitter_size: 2.5,

            // Vizu√°lis be√°ll√≠t√°sok
            render_shaders: true,
            multi_color: false,
            render_bloom: false,

            // H√°tt√©rsz√≠n (feh√©r)
            background_color: { r: 255, g: 255, b: 255 },
            transparent: false
        };

        // Fluid art sz√≠npaletta (t√ºrkiz, lila, k√©k)
        const FLUID_COLORS_HEX = ['#00ffff', '#cc33ff', '#0080ff'];
        const FLUID_COLORS_RGB = [
            { r: 0, g: 255, b: 255 },    // T√ºrkiz
            { r: 204, g: 51, b: 255 },   // Lila
            { r: 0, g: 128, b: 255 }     // Kir√°lyk√©k
        ];

        // Eg√©r interakci√≥ param√©terek
        const MOUSE_CONFIG = {
            // Minim√°lis sebess√©g k√ºsz√∂b (px/frame)
            speed_threshold: 300,

            // Throttle: h√°ny mozdulatonk√©nt reag√°ljon (1 = minden, 3 = minden 3.)
            throttle_rate: 3
        };

        // Kezdeti splat-ok param√©terei
        const INITIAL_SPLATS = {
            count: 5,                    // H√°ny kezdeti folt
            delay_between: 250,          // K√©sleltet√©s splat-ok k√∂z√∂tt (ms)
            move_distance: 50,          // H√∫z√°s t√°vols√°g (px)
            move_steps: 1                // H√∫z√°s l√©p√©sek sz√°ma
        };

        // ============================================
        // INICIALIZ√ÅL√ÅS
        // ============================================

        const canvas = document.getElementById('renderSurface');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Fluid objektum l√©trehoz√°sa
        let myFluid = new Fluid(canvas);

        // Konfigur√°ci√≥ alkalmaz√°sa
        myFluid.mapBehaviors(PHYSICS_CONFIG);

        console.log('üé® Fluid Art Study 2 - Param√©terek:');
        console.log('  - Dissipation (sz√≠nveszt√©s):', PHYSICS_CONFIG.dissipation);
        console.log('  - Velocity (sebess√©g lassul√°s):', PHYSICS_CONFIG.velocity);
        console.log('  - Emitter size (folt m√©ret):', PHYSICS_CONFIG.emitter_size);
        console.log('  - Curl (√∂rv√©nyl√©s):', PHYSICS_CONFIG.curl);

        // ============================================
        // SEG√âDF√úGGV√âNYEK
        // ============================================

        // Eg√©r k√∂vet√©s v√°ltoz√≥k
        let lastX = -1;
        let lastY = -1;
        let isSimulating = false;
        let moveCounter = 0;

        // Kezdeti splat-ok l√©trehoz√°sa
        function createInitialSplats() {
            for (let i = 0; i < INITIAL_SPLATS.count; i++) {
                setTimeout(() => {
                    isSimulating = true;
                    const x = (0.2 + Math.random() * 0.6) * canvas.width;
                    const y = (0.2 + Math.random() * 0.6) * canvas.height;

                    // Sz√≠nbe√°ll√≠t√°s
                    myFluid.color = FLUID_COLORS_RGB[i];

                    // Kattint√°s szimul√°ci√≥
                    const mouseDownEvent = new MouseEvent('mousedown', {
                        clientX: x,
                        clientY: y,
                        bubbles: true,
                        cancelable: true
                    });

                    canvas.dispatchEvent(mouseDownEvent);

                    // T√∂bb k√∂ztes mozg√°s esem√©ny a nagyobb folt el√©r√©s√©hez
                    for (let step = 1; step <= INITIAL_SPLATS.move_steps; step++) {
                        setTimeout(() => {
                            const angle = Math.random() * Math.PI * 2;
                            const dist = (INITIAL_SPLATS.move_distance * step) / INITIAL_SPLATS.move_steps;
                            const mouseMoveEvent = new MouseEvent('mousemove', {
                                clientX: x + Math.cos(angle) * dist,
                                clientY: y + Math.sin(angle) * dist,
                                bubbles: true,
                                cancelable: true
                            });
                            canvas.dispatchEvent(mouseMoveEvent);
                        }, step * 20);
                    }

                    setTimeout(() => {
                        const angle = Math.random() * Math.PI * 2;
                        const mouseUpEvent = new MouseEvent('mouseup', {
                            clientX: x + Math.cos(angle) * INITIAL_SPLATS.move_distance,
                            clientY: y + Math.sin(angle) * INITIAL_SPLATS.move_distance,
                            bubbles: true,
                            cancelable: true
                        });
                        canvas.dispatchEvent(mouseUpEvent);
                        isSimulating = false;
                        console.log(`‚úÖ Splat ${i+1}: ${FLUID_COLORS_HEX[i]}, m√©ret=${PHYSICS_CONFIG.emitter_size}`);
                    }, INITIAL_SPLATS.move_steps * 20 + 50);
                }, i * INITIAL_SPLATS.delay_between);
            }
        }

        // Eg√©rmozg√°s k√∂vet√©s - passz√≠v megfigyel√©s
        canvas.addEventListener('mousemove', (e) => {
            // Sz≈±rj√ºk a szimul√°lt esem√©nyeket
            if (isSimulating || !e.isTrusted) {
                return;
            }

            const x = e.clientX;
            const y = e.clientY;

            if (lastX !== -1 && lastY !== -1) {
                const dx = x - lastX;
                const dy = y - lastY;
                const speed = Math.sqrt(dx * dx + dy * dy);

                // Throttle √©s sebess√©g k√ºsz√∂b ellen≈ërz√©s
                moveCounter++;
                if (speed > MOUSE_CONFIG.speed_threshold &&
                    moveCounter % MOUSE_CONFIG.throttle_rate === 0) {
                    isSimulating = true;

                    // Random sz√≠n
                    const colorIndex = Math.floor(Math.random() * FLUID_COLORS_RGB.length);
                    myFluid.color = FLUID_COLORS_RGB[colorIndex];

                    // Szimul√°lt kattint√°s
                    const mouseDownEvent = new MouseEvent('mousedown', {
                        clientX: x,
                        clientY: y,
                        bubbles: true
                    });

                    canvas.dispatchEvent(mouseDownEvent);

                    setTimeout(() => {
                        const mouseUpEvent = new MouseEvent('mouseup', {
                            clientX: x + dx,
                            clientY: y + dy,
                            bubbles: true
                        });
                        canvas.dispatchEvent(mouseUpEvent);
                        isSimulating = false;
                    }, 20);
                }
            }

            lastX = x;
            lastY = y;
        }, { passive: true });

        // Ablak √°tm√©retez√©s
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // ============================================
        // IND√çT√ÅS
        // ============================================

        // Kezdeti splat-ok l√©trehoz√°sa - aktiv√°l√°s ut√°n
        setTimeout(() => {
            // Most aktiv√°ljuk a Fluid-JS-t (√≠gy nem lesz automatikus piros folt)
            myFluid.activate();

            console.log('‚úÖ Fluid-JS aktiv√°lva');

            // Kis k√©sleltet√©s az aktiv√°l√°s ut√°n
            setTimeout(() => {
                createInitialSplats();
            }, 300);
        }, 500);

        console.log('‚úÖ Fluid Art Study 2 bet√∂ltve - param√©terezett verzi√≥!');
    </script>
</body>
</html>
