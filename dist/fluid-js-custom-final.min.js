/*! For license information please see fluid.min.js.LICENSE.txt */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.Fluid=r():e.Fluid=r()}(self,()=>(()=>{"use strict";var e={17:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.activator=function(e,r,n,o,a){if(f){var u=[];u.push(new d),a=u}f=!0;var l,v,m,c,p,g,b,h,S,y,T=t.behavior,R=[],E=[],P=(r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),r.STATIC_DRAW),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(0),function(e){r.bindFramebuffer(r.FRAMEBUFFER,e),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}),x=T.embedded_dither?w(i.default):w(s);D();var k=Date.now();function D(){var e=n.halfFloatTexType,t=n.formatRGBA,i=n.formatRG,o=n.formatR,a=n.supportLinearFiltering?r.LINEAR:r.NEAREST,u=O(T.sim_resolution),f=O(T.dye_resolution),s=O(T.bloom_resolution);l=u.width,v=u.height,m=f.width,c=f.height,p=p?A(p,m,c,t.internalFormat,t.format,e,a):J(m,c,t.internalFormat,t.format,e,a),g=g?A(g,l,v,i.internalFormat,i.format,e,a):J(l,v,i.internalFormat,i.format,e,a),y=_(s.width,s.height,t.internalFormat,t.format,e,a),b=_(l,v,o.internalFormat,o.format,e,r.NEAREST),h=_(l,v,o.internalFormat,o.format,e,r.NEAREST),S=J(l,v,o.internalFormat,o.format,e,r.NEAREST),R.length=0;for(var d=0;d<T.bloom_iterations;d++){var E=s.width>>d+1,P=s.height>>d+1;if(E<2||P<2)break;var x=_(E,P,t.internalFormat,t.format,e,a);R.push(x)}}function J(e,r,n,t,i,o){var a=_(e,r,n,t,i,o),u=_(e,r,n,t,i,o);return{get read(){return a},set read(e){a=e},get write(){return u},set write(e){u=e},swap:function(){var e=a;a=u,u=e}}}function _(e,n,t,i,o,a){r.activeTexture(r.TEXTURE0);var u=r.createTexture();r.bindTexture(r.TEXTURE_2D,u),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,t,e,n,0,i,o,null);var l=r.createFramebuffer();return r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0),r.viewport(0,0,e,n),r.clear(r.COLOR_BUFFER_BIT),{texture:u,fbo:l,width:e,height:n,attach:function(e){return r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,u),e}}}function A(e,n,t,i,a,u,l){return e.read=function(e,n,t,i,a,u,l){var v=_(n,t,i,a,u,l);return o.clearProgram.bind(),r.uniform1i(o.clearProgram.uniforms.uTexture,e.attach(0)),r.uniform1f(o.clearProgram.uniforms.value,1),P(v.fbo),v}(e.read,n,t,i,a,u,l),e.write=_(n,t,i,a,u,l),e}function w(e){var n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texImage2D(r.TEXTURE_2D,0,r.RGB,1,1,0,r.RGB,r.UNSIGNED_BYTE,new Uint8Array([255,255,255]));var t={texture:n,width:1,height:1,attach:function(e){return r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,n),e}},i=new Image;return i.src=e,i.onload=function(){t.width=i.width,t.height=i.height,r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGB,r.RGB,r.UNSIGNED_BYTE,i)},t}function U(n,t,i,a,u,f){var s=void 0!==f?f:T.emitter_size;r.viewport(0,0,l,v),o.splatProgram.bind(),r.uniform1i(o.splatProgram.uniforms.uTarget,g.read.attach(0)),r.uniform1f(o.splatProgram.uniforms.aspectRatio,e.width/e.height),r.uniform2f(o.splatProgram.uniforms.point,n/e.width,1-t/e.height),r.uniform3f(o.splatProgram.uniforms.color,i,-a,1),r.uniform1f(o.splatProgram.uniforms.radius,s/100),P(g.write.fbo),g.swap(),r.viewport(0,0,m,c),r.uniform1i(o.splatProgram.uniforms.uTarget,p.read.attach(0)),r.uniform3f(o.splatProgram.uniforms.color,u.r,u.g,u.b),P(p.write.fbo),p.swap()}function F(){var e=function(e){var r,n,t,i,o,a,u;switch(a=1*(1-1*(o=6*e-(i=Math.floor(6*e)))),u=1*(1-1*(1-o)),i%6){case 0:r=1,n=u,t=0;break;case 1:r=a,n=1,t=0;break;case 2:r=0,n=1,t=u;break;case 3:r=0,n=a,t=1;break;case 4:r=u,n=0,t=1;break;case 5:r=1,n=0,t=a}return{r,g:n,b:t}}(Math.random());return e.r*=.15,e.g*=.15,e.b*=.15,e}function O(e){var n=r.drawingBufferWidth/r.drawingBufferHeight;n<1&&(n=1/n);var t=Math.round(e*n),i=Math.round(e);return r.drawingBufferWidth>r.drawingBufferHeight?{width:t,height:i}:{width:i,height:t}}function L(e,r,n){return{x:r/e.width,y:n/e.height}}return function t(){e.width==e.clientWidth&&e.height==e.clientHeight||(e.width=e.clientWidth,e.height=e.clientHeight,D()),function(){E.length>0&&(E.pop(),U(500,500,100,0,{r:0,g:0,b:0}));for(var e=0;e<a.length;e++){var r=a[e];r.moved&&(U(r.x,r.y,r.dx,r.dy,r.color),1!==e&&(r.moved=!1))}if(T.multi_color&&k+100<Date.now()){k=Date.now();for(var n=0;n<a.length;n++)a[n].color=F()}}(),T.paused||function(e){r.disable(r.BLEND),r.viewport(0,0,l,v),o.curlProgram.bind(),r.uniform2f(o.curlProgram.uniforms.texelSize,1/l,1/v),r.uniform1i(o.curlProgram.uniforms.uVelocity,g.read.attach(0)),P(h.fbo),o.vorticityProgram.bind(),r.uniform2f(o.vorticityProgram.uniforms.texelSize,1/l,1/v),r.uniform1i(o.vorticityProgram.uniforms.uVelocity,g.read.attach(0)),r.uniform1i(o.vorticityProgram.uniforms.uCurl,h.attach(1)),r.uniform1f(o.vorticityProgram.uniforms.curl,T.curl),r.uniform1f(o.vorticityProgram.uniforms.dt,e),P(g.write.fbo),g.swap(),o.divergenceProgram.bind(),r.uniform2f(o.divergenceProgram.uniforms.texelSize,1/l,1/v),r.uniform1i(o.divergenceProgram.uniforms.uVelocity,g.read.attach(0)),P(b.fbo),o.clearProgram.bind(),r.uniform1i(o.clearProgram.uniforms.uTexture,S.read.attach(0)),r.uniform1f(o.clearProgram.uniforms.value,T.pressure),P(S.write.fbo),S.swap(),o.pressureProgram.bind(),r.uniform2f(o.pressureProgram.uniforms.texelSize,1/l,1/v),r.uniform1i(o.pressureProgram.uniforms.uDivergence,b.attach(0));for(var t=0;t<T.pressure_iteration;t++)r.uniform1i(o.pressureProgram.uniforms.uPressure,S.read.attach(1)),P(S.write.fbo),S.swap();o.gradientSubtractProgram.bind(),r.uniform2f(o.gradientSubtractProgram.uniforms.texelSize,1/l,1/v),r.uniform1i(o.gradientSubtractProgram.uniforms.uPressure,S.read.attach(0)),r.uniform1i(o.gradientSubtractProgram.uniforms.uVelocity,g.read.attach(1)),P(g.write.fbo),g.swap(),o.advectionProgram.bind(),r.uniform2f(o.advectionProgram.uniforms.texelSize,1/l,1/v),n.supportLinearFiltering||r.uniform2f(o.advectionProgram.uniforms.dyeTexelSize,1/l,1/v);var i=g.read.attach(0);r.uniform1i(o.advectionProgram.uniforms.uVelocity,i),r.uniform1i(o.advectionProgram.uniforms.uSource,i),r.uniform1f(o.advectionProgram.uniforms.dt,e),r.uniform1f(o.advectionProgram.uniforms.dissipation,T.velocity),P(g.write.fbo),g.swap(),r.viewport(0,0,m,c),n.supportLinearFiltering||r.uniform2f(o.advectionProgram.uniforms.dyeTexelSize,1/m,1/c),r.uniform1i(o.advectionProgram.uniforms.uVelocity,g.read.attach(0)),r.uniform1i(o.advectionProgram.uniforms.uSource,p.read.attach(1)),r.uniform1f(o.advectionProgram.uniforms.dissipation,T.dissipation),P(p.write.fbo),p.swap()}(.016),function(n){T.render_bloom&&function(e,n){if(!(R.length<2)){var t=n;r.disable(r.BLEND),o.bloomPreFilterProgram.bind();var i=T.threshold*T.soft_knee+1e-4,a=T.threshold-i,u=2*i,l=.25/i;r.uniform3f(o.bloomPreFilterProgram.uniforms.curve,a,u,l),r.uniform1f(o.bloomPreFilterProgram.uniforms.threshold,T.threshold),r.uniform1i(o.bloomPreFilterProgram.uniforms.uTexture,e.attach(0)),r.viewport(0,0,t.width,t.height),P(t.fbo),o.bloomBlurProgram.bind();for(var v=0;v<R.length;v++){var m=R[v];r.uniform2f(o.bloomBlurProgram.uniforms.texelSize,1/t.width,1/t.height),r.uniform1i(o.bloomBlurProgram.uniforms.uTexture,t.attach(0)),r.viewport(0,0,m.width,m.height),P(m.fbo),t=m}r.blendFunc(r.ONE,r.ONE),r.enable(r.BLEND);for(var f=R.length-2;f>=0;f--){var s=R[f];r.uniform2f(o.bloomBlurProgram.uniforms.texelSize,1/t.width,1/t.height),r.uniform1i(o.bloomBlurProgram.uniforms.uTexture,t.attach(0)),r.viewport(0,0,s.width,s.height),P(s.fbo),t=s}r.disable(r.BLEND),o.bloomFinalProgram.bind(),r.uniform2f(o.bloomFinalProgram.uniforms.texelSize,1/t.width,1/t.height),r.uniform1i(o.bloomFinalProgram.uniforms.uTexture,t.attach(0)),r.uniform1f(o.bloomFinalProgram.uniforms.intensity,T.intensity),r.viewport(0,0,n.width,n.height),P(n.fbo)}}(p.read,y),null!=n&&T.transparent?r.disable(r.BLEND):(r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND));var t=null==n?r.drawingBufferWidth:m,i=null==n?r.drawingBufferHeight:c;if(r.viewport(0,0,t,i),!T.transparent){o.colorProgram.bind();var a=T.background_color;r.uniform4f(o.colorProgram.uniforms.color,a.r/255,a.g/255,a.b/255,1),P(n)}if(null==n&&T.transparent&&(o.backgroundProgram.bind(),r.uniform1f(o.backgroundProgram.uniforms.aspectRatio,e.width/e.height),P(null)),T.render_shaders){var u=T.render_bloom?o.displayBloomShadingProgram:o.displayShadingProgram;if(u.bind(),r.uniform2f(u.uniforms.texelSize,1/t,1/i),r.uniform1i(u.uniforms.uTexture,p.read.attach(0)),T.render_bloom){r.uniform1i(u.uniforms.uBloom,y.attach(1)),r.uniform1i(u.uniforms.uDithering,x.attach(2));var l=L(x,t,i);r.uniform2f(u.uniforms.ditherScale,l.x,l.y)}}else{var v=T.render_bloom?o.displayBloomProgram:o.displayProgram;if(v.bind(),r.uniform1i(v.uniforms.uTexture,p.read.attach(0)),T.render_bloom){r.uniform1i(v.uniforms.uBloom,y.attach(1)),r.uniform1i(v.uniforms.uDithering,x.attach(2));var f=L(x,t,i);r.uniform2f(v.uniforms.ditherScale,f.x,f.y)}}P(n)}(null),requestAnimationFrame(t)}(),e.addEventListener("mousemove",function(e){a[0].moved=a[0].down,a[0].dx=5*(e.offsetX-a[0].x),a[0].dy=5*(e.offsetY-a[0].y),a[0].x=e.offsetX,a[0].y=e.offsetY}),e.addEventListener("mousedown",function(){a[0].down=!0,a[0].color=F()}),window.addEventListener("mouseup",function(){a[0].down=!1}),window.addEventListener("keydown",function(e){"KeyP"===e.code&&(T.paused=!T.paused)," "===e.key&&E.push(parseInt(20*Math.random())+5)}),{splat:U,canvas:e}},r.initWebGL=function(e){var r=[];r.push(new d);var n=e.getContext("webgl2",t.DRAWING_PARAMS),i=!!n;i||(n=e.getContext("webgl",t.DRAWING_PARAMS)||e.getContext("experimental-webgl",t.DRAWING_PARAMS));var o=function(){var e,r,t,o,a;i?(n.getExtension("EXT_color_buffer_float"),a=n.getExtension("OES_texture_float_linear")):(o=n.getExtension("OES_texture_half_float"),a=n.getExtension("OES_texture_half_float_linear"));var u=i?n.HALF_FLOAT:o.HALF_FLOAT_OES;function l(e,r,t){var i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,e,4,4,0,r,t,null);var o=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)switch(e){case n.R16F:return l(n.RG16F,n.RG,t);case n.RG16F:return l(n.RGBA16F,n.RGBA,t);default:return null}return{internalFormat:e,format:r}}return n.clearColor(0,0,0,1),i?(e=l(n.RGBA16F,n.RGBA,u),r=l(n.RG16F,n.RG,u),t=l(n.R16F,n.RED,u)):(e=l(n.RGBA,n.RGBA,u),r=l(n.RGBA,n.RGBA,u),t=l(n.RGBA,n.RGBA,u)),{formatRGBA:e,formatRG:r,formatR:t,halfFloatTexType:u,supportLinearFiltering:a}}();/Mobi|Android/i.test(navigator.userAgent)&&(t.behavior.render_shaders=!1),o.supportLinearFiltering||(t.behavior.render_shaders=!1,t.behavior.render_bloom=!1);var a,u={baseVertex:l(n.VERTEX_SHADER,t.SHADER_SOURCE.vertex),clear:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.clear),color:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.color),background:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.background),display:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.display),displayBloom:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.displayBloom),displayShading:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.displayShading),displayBloomShading:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.displayBloomShading),bloomPreFilter:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.bloomPreFilter),bloomBlur:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.bloomBlur),bloomFinal:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.bloomFinal),splat:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.splat),advectionManualFiltering:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.advectionManualFiltering),advection:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.advection),divergence:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.divergence),curl:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.curl),vorticity:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.vorticity),pressure:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.pressure),gradientSubtract:l(n.FRAGMENT_SHADER,t.SHADER_SOURCE.gradientSubtract)};function l(e,r){var t=n.createShader(e);if(n.shaderSource(t,r),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS))throw n.getShaderInfoLog(t);return t}return{programs:(a=o.supportLinearFiltering,{clearProgram:new c(u.baseVertex,u.clear,n),colorProgram:new c(u.baseVertex,u.color,n),backgroundProgram:new c(u.baseVertex,u.background,n),displayProgram:new c(u.baseVertex,u.display,n),displayBloomProgram:new c(u.baseVertex,u.displayBloom,n),displayShadingProgram:new c(u.baseVertex,u.displayShading,n),displayBloomShadingProgram:new c(u.baseVertex,u.displayBloomShading,n),bloomPreFilterProgram:new c(u.baseVertex,u.bloomPreFilter,n),bloomBlurProgram:new c(u.baseVertex,u.bloomBlur,n),bloomFinalProgram:new c(u.baseVertex,u.bloomFinal,n),splatProgram:new c(u.baseVertex,u.splat,n),advectionProgram:new c(u.baseVertex,a?u.advection:u.advectionManualFiltering,n),divergenceProgram:new c(u.baseVertex,u.divergence,n),curlProgram:new c(u.baseVertex,u.curl,n),vorticityProgram:new c(u.baseVertex,u.vorticity,n),pressureProgram:new c(u.baseVertex,u.pressure,n),gradientSubtractProgram:new c(u.baseVertex,u.gradientSubtract,n)}),webGL:n,colorFormats:o,pointers:r}},r.setDitherURL=function(e){s=e};var t=o(n(299)),i=o(n(52));function o(e,r){if("function"==typeof WeakMap)var n=new WeakMap,t=new WeakMap;return(o=function(e,r){if(!r&&e&&e.__esModule)return e;var i,o,u={__proto__:null,default:e};if(null===e||"object"!=a(e)&&"function"!=typeof e)return u;if(i=r?t:n){if(i.has(e))return i.get(e);i.set(e,u)}for(var l in e)"default"!==l&&{}.hasOwnProperty.call(e,l)&&((o=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,l))&&(o.get||o.set)?i(u,l,o):u[l]=e[l]);return u})(e,r)}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function l(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,m(t.key),t)}}function v(e,r,n){return r&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var r=function(e){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(r)?r:r+""}var f=!1,s="./assets/dither.png",c=function(){return v(function e(r,n,t){if(u(this,e),this.uniforms={},this.webGL=t,this.program=t.createProgram(),t.attachShader(this.program,r),t.attachShader(this.program,n),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw t.getProgramInfoLog(this.program);for(var i=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),o=0;o<i;o++){var a=t.getActiveUniform(this.program,o).name;this.uniforms[a]=t.getUniformLocation(this.program,a)}},[{key:"bind",value:function(){this.webGL.useProgram(this.program)}}])}(),d=v(function e(){u(this,e),this.id=-1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.down=!1,this.moved=!1,this.color=[30,0,300]})},52:(e,r,n)=>{n.r(r),n.d(r,{default:()=>t});const t="data:image/png;base64,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"},299:(e,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o(e,r,t){return(r=function(e){var r=function(e){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(r,"__esModule",{value:!0}),r.behavior=r.SHADER_SOURCE=r.DRAWING_PARAMS=void 0,r.setBehaviors=function(e){r.behavior=a=i(i({},a),e)};var a=r.behavior={sim_resolution:512,dye_resolution:512,paused:!1,clamp_values:!0,embedded_dither:!0,dissipation:1,velocity:.999,pressure:.8,pressure_iteration:20,fluid_color:[[0,0,0],[.4,.2,0]],curl:10,emitter_size:2,render_shaders:!0,multi_color:!1,render_bloom:!1,bloom_iterations:8,bloom_resolution:256,intensity:.8,threshold:.6,soft_knee:.7,background_color:{r:0,g:0,b:0},transparent:!1};r.DRAWING_PARAMS={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1,powerPreference:"default"},r.SHADER_SOURCE={blank:"",vertex:"\n                  precision highp float;\n              \n                  attribute vec2 aPosition;\n                  varying vec2 vUv;\n                  varying vec2 vL;\n                  varying vec2 vR;\n                  varying vec2 vT;\n                  varying vec2 vB;\n                  uniform vec2 texelSize;\n              \n                  void main () {\n                      vUv = aPosition * 0.5 + 0.5;\n                      vL = vUv - vec2(texelSize.x, 0.0);\n                      vR = vUv + vec2(texelSize.x, 0.0);\n                      vT = vUv + vec2(0.0, texelSize.y);\n                      vB = vUv - vec2(0.0, texelSize.y);\n                      gl_Position = vec4(aPosition, 0.0, 1.0);\n                  }",clear:"\n                  precision mediump float;\n                  precision mediump sampler2D;\n              \n                  varying highp vec2 vUv;\n                  uniform sampler2D uTexture;\n                  uniform float value;\n              \n                  void main () {\n                      gl_FragColor = value * texture2D(uTexture, vUv);\n                  }\n              ",color:"\n                  precision mediump float;\n              \n                  uniform vec4 color;\n              \n                  void main () {\n                      gl_FragColor = color;\n                  }\n              ",background:"\n                    void main() { \n                        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); \n                    } \n            ",display:"\n                  precision highp float;\n                  precision highp sampler2D;\n              \n                  varying vec2 vUv;\n                  uniform sampler2D uTexture;\n              \n                  void main () {\n                      vec3 C = texture2D(uTexture, vUv).rgb;\n                      float a = max(C.r, max(C.g, C.b));\n                      gl_FragColor = vec4(C, a);\n                  }\n              ",displayBloom:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          uniform sampler2D uTexture;\n          uniform sampler2D uBloom;\n          uniform sampler2D uDithering;\n          uniform vec2 ditherScale;\n      \n          void main () {\n              vec3 C = texture2D(uTexture, vUv).rgb;\n              vec3 bloom = texture2D(uBloom, vUv).rgb;\n              vec3 noise = texture2D(uDithering, vUv * ditherScale).rgb;\n              noise = noise * 2.0 - 1.0;\n              bloom += noise / 800.0;\n              bloom = pow(bloom.rgb, vec3(1.0 / 2.2));\n              C += bloom;\n              float a = max(C.r, max(C.g, C.b));\n              gl_FragColor = vec4(C, a);\n          }\n      ",displayShading:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          varying vec2 vL;\n          varying vec2 vR;\n          varying vec2 vT;\n          varying vec2 vB;\n          uniform sampler2D uTexture;\n          uniform vec2 texelSize;\n      \n          void main () {\n              vec3 L = texture2D(uTexture, vL).rgb;\n              vec3 R = texture2D(uTexture, vR).rgb;\n              vec3 T = texture2D(uTexture, vT).rgb;\n              vec3 B = texture2D(uTexture, vB).rgb;\n              vec3 C = texture2D(uTexture, vUv).rgb;\n      \n              float dx = length(R) - length(L);\n              float dy = length(T) - length(B);\n      \n              vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n              vec3 l = vec3(0.0, 0.0, 1.0);\n      \n              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n              C.rgb *= diffuse;\n      \n              float a = max(C.r, max(C.g, C.b));\n              gl_FragColor = vec4(C, a);\n          }\n      ",displayBloomShading:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          varying vec2 vL;\n          varying vec2 vR;\n          varying vec2 vT;\n          varying vec2 vB;\n          uniform sampler2D uTexture;\n          uniform sampler2D uBloom;\n          uniform sampler2D uDithering;\n          uniform vec2 ditherScale;\n          uniform vec2 texelSize;\n      \n          void main () {\n              vec3 L = texture2D(uTexture, vL).rgb;\n              vec3 R = texture2D(uTexture, vR).rgb;\n              vec3 T = texture2D(uTexture, vT).rgb;\n              vec3 B = texture2D(uTexture, vB).rgb;\n              vec3 C = texture2D(uTexture, vUv).rgb;\n      \n              float dx = length(R) - length(L);\n              float dy = length(T) - length(B);\n      \n              vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n              vec3 l = vec3(0.0, 0.0, 1.0);\n      \n              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n              C *= diffuse;\n      \n              vec3 bloom = texture2D(uBloom, vUv).rgb;\n              vec3 noise = texture2D(uDithering, vUv * ditherScale).rgb;\n              noise = noise * 2.0 - 1.0;\n              bloom += noise / 800.0;\n              bloom = pow(bloom.rgb, vec3(1.0 / 2.2));\n              C += bloom;\n      \n              float a = max(C.r, max(C.g, C.b));\n              gl_FragColor = vec4(C, a);\n          }\n      ",bloomPreFilter:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying vec2 vUv;\n          uniform sampler2D uTexture;\n          uniform vec3 curve;\n          uniform float threshold;\n      \n          void main () {\n              vec3 c = texture2D(uTexture, vUv).rgb;\n              float br = max(c.r, max(c.g, c.b));\n              float rq = clamp(br - curve.x, 0.0, curve.y);\n              rq = curve.z * rq * rq;\n              c *= max(rq, br - threshold) / max(br, 0.0001);\n              gl_FragColor = vec4(c, 0.0);\n          }\n      ",bloomBlur:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying vec2 vL;\n          varying vec2 vR;\n          varying vec2 vT;\n          varying vec2 vB;\n          uniform sampler2D uTexture;\n      \n          void main () {\n              vec4 sum = vec4(0.0);\n              sum += texture2D(uTexture, vL);\n              sum += texture2D(uTexture, vR);\n              sum += texture2D(uTexture, vT);\n              sum += texture2D(uTexture, vB);\n              sum *= 0.25;\n              gl_FragColor = sum;\n          }\n      ",bloomFinal:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying vec2 vL;\n          varying vec2 vR;\n          varying vec2 vT;\n          varying vec2 vB;\n          uniform sampler2D uTexture;\n          uniform float intensity;\n      \n          void main () {\n              vec4 sum = vec4(0.0);\n              sum += texture2D(uTexture, vL);\n              sum += texture2D(uTexture, vR);\n              sum += texture2D(uTexture, vT);\n              sum += texture2D(uTexture, vB);\n              sum *= 0.25;\n              gl_FragColor = sum * intensity;\n          }\n      ",splat:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          uniform sampler2D uTarget;\n          uniform float aspectRatio;\n          uniform vec3 color;\n          uniform vec2 point;\n          uniform float radius;\n      \n          void main () {\n              vec2 p = vUv - point.xy;\n              p.x *= aspectRatio;\n              vec3 splat = exp(-dot(p, p) / radius) * color;\n              vec3 base = texture2D(uTarget, vUv).xyz;\n              gl_FragColor = vec4(base + splat, 1.0);\n          }\n      ",advectionManualFiltering:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          uniform sampler2D uVelocity;\n          uniform sampler2D uSource;\n          uniform vec2 texelSize;\n          uniform vec2 dyeTexelSize;\n          uniform float dt;\n          uniform float dissipation;\n      \n          vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n              vec2 st = uv / tsize - 0.5;\n      \n              vec2 iuv = floor(st);\n              vec2 fuv = fract(st);\n      \n              vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n              vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n              vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n              vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n      \n              return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n          }\n      \n          void main () {\n              vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n              gl_FragColor = dissipation * bilerp(uSource, coord, dyeTexelSize);\n              gl_FragColor.a = 1.0;\n          }\n      ",advection:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          uniform sampler2D uVelocity;\n          uniform sampler2D uSource;\n          uniform vec2 texelSize;\n          uniform float dt;\n          uniform float dissipation;\n      \n          void main () {\n              vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n              gl_FragColor = dissipation * texture2D(uSource, coord);\n              gl_FragColor.a = 1.0;\n          }\n      ",divergence:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying highp vec2 vUv;\n          varying highp vec2 vL;\n          varying highp vec2 vR;\n          varying highp vec2 vT;\n          varying highp vec2 vB;\n          uniform sampler2D uVelocity;\n      \n          void main () {\n              float L = texture2D(uVelocity, vL).x;\n              float R = texture2D(uVelocity, vR).x;\n              float T = texture2D(uVelocity, vT).y;\n              float B = texture2D(uVelocity, vB).y;\n      \n              vec2 C = texture2D(uVelocity, vUv).xy;\n              if (vL.x < 0.0) { L = -C.x; }\n              if (vR.x > 1.0) { R = -C.x; }\n              if (vT.y > 1.0) { T = -C.y; }\n              if (vB.y < 0.0) { B = -C.y; }\n      \n              float div = 0.5 * (R - L + T - B);\n              gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n          }\n      ",curl:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying highp vec2 vUv;\n          varying highp vec2 vL;\n          varying highp vec2 vR;\n          varying highp vec2 vT;\n          varying highp vec2 vB;\n          uniform sampler2D uVelocity;\n      \n          void main () {\n              float L = texture2D(uVelocity, vL).y;\n              float R = texture2D(uVelocity, vR).y;\n              float T = texture2D(uVelocity, vT).x;\n              float B = texture2D(uVelocity, vB).x;\n              float vorticity = R - L - T + B;\n              gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n          }\n      ",vorticity:"\n          precision highp float;\n          precision highp sampler2D;\n      \n          varying vec2 vUv;\n          varying vec2 vL;\n          varying vec2 vR;\n          varying vec2 vT;\n          varying vec2 vB;\n          uniform sampler2D uVelocity;\n          uniform sampler2D uCurl;\n          uniform float curl;\n          uniform float dt;\n      \n          void main () {\n              float L = texture2D(uCurl, vL).x;\n              float R = texture2D(uCurl, vR).x;\n              float T = texture2D(uCurl, vT).x;\n              float B = texture2D(uCurl, vB).x;\n              float C = texture2D(uCurl, vUv).x;\n      \n              vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n              force /= length(force) + 0.0001;\n              force *= curl * C;\n              force.y *= -1.0;\n      \n              vec2 vel = texture2D(uVelocity, vUv).xy;\n              gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n          }\n      ",pressure:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying highp vec2 vUv;\n          varying highp vec2 vL;\n          varying highp vec2 vR;\n          varying highp vec2 vT;\n          varying highp vec2 vB;\n          uniform sampler2D uPressure;\n          uniform sampler2D uDivergence;\n      \n          vec2 boundary (vec2 uv) {\n              return uv;\n              // uncomment if you use wrap or repeat texture mode\n              // uv = min(max(uv, 0.0), 1.0);\n              // return uv;\n          }\n      \n          void main () {\n              float L = texture2D(uPressure, boundary(vL)).x;\n              float R = texture2D(uPressure, boundary(vR)).x;\n              float T = texture2D(uPressure, boundary(vT)).x;\n              float B = texture2D(uPressure, boundary(vB)).x;\n              float C = texture2D(uPressure, vUv).x;\n              float divergence = texture2D(uDivergence, vUv).x;\n              float pressure = (L + R + B + T - divergence) * 0.25;\n              gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n          }\n      ",gradientSubtract:"\n          precision mediump float;\n          precision mediump sampler2D;\n      \n          varying highp vec2 vUv;\n          varying highp vec2 vL;\n          varying highp vec2 vR;\n          varying highp vec2 vT;\n          varying highp vec2 vB;\n          uniform sampler2D uPressure;\n          uniform sampler2D uVelocity;\n      \n          vec2 boundary (vec2 uv) {\n              return uv;\n              // uv = min(max(uv, 0.0), 1.0);\n              // return uv;\n          }\n      \n          void main () {\n              float L = texture2D(uPressure, boundary(vL)).x;\n              float R = texture2D(uPressure, boundary(vR)).x;\n              float T = texture2D(uPressure, boundary(vT)).x;\n              float B = texture2D(uPressure, boundary(vB)).x;\n              vec2 velocity = texture2D(uVelocity, vUv).xy;\n              velocity.xy -= vec2(R - L, T - B);\n              gl_FragColor = vec4(velocity, 0.0, 1.0);\n          }\n      "}},509:(e,r,n)=>{var t=n(299),i=n(17);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(r){l(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l(e,r,n){return(r=m(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function v(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,m(t.key),t)}}function m(e){var r=function(e){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(r)?r:r+""}e.exports=function(){return e=function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.PARAMS=t.behavior,r.width=r.clientWidth,r.height=r.clientHeight,this.canvas=r;var n=(0,i.initWebGL)(r),o=n.programs,a=n.webGL,u=n.colorFormats,l=n.pointers;this.programs=o,this.webGL=a,this.colorFormats=u,this.pointers=l,this._splatAPI=null},r=[{key:"activate",value:function(){this._splatAPI=(0,i.activator)(this.canvas,this.webGL,this.colorFormats,this.programs,this.pointers)}},{key:"deactivate",value:function(){}},{key:"reset",value:function(){(0,i.initWebGL)(),this.activate()}},{key:"mapBehaviors",value:function(e){this.PARAMS=u(u({},this.PARAMS),e),(0,t.setBehaviors)(this.PARAMS)}},{key:"setAsBackground",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];canvas.style.zIndex=e?"-99":"0",canvas.style.position=e?"absolute":"relative"}},{key:"applyBackground",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.canvas;switch(e=e.toLowerCase(),this.PARAMS.transparent=!0,e){case"gradient":!function(){var e="";switch(n){case"radial":e="radial-gradient("+r+")";break;case"conic":e="conic-gradient("+r+")";break;case"repeating-linear":e="repeating-linear-gradient("+r+")";break;case"repeating-radial":e="repeating-radial-gradient("+r+")";break;default:e="linear-gradient("+r+")"}t.style.backgroundImage=e}();break;case"image":t.style.backgroundImage="url('"+r+"')",n&&(t.style.backgroundRepeat=n.repeat?"repeat":"no-repeat",t.style.backgroundPosition=n.position?n.position:"center",t.style.backgroundSize=n.size?n.size:"contain",t.style.backgroundColor=n.color?n.color:"none");break;default:this.PARAMS.transparent=!1,this.PARAMS.background_color=r}this.reset()}},{key:"createSplat",value:function(e){if(this._splatAPI&&this._splatAPI.splat){var r=e.color,n=void 0===r?{r:255,g:255,b:255}:r,t=e.x,i=void 0===t?.5:t,o=e.y,a=void 0===o?.5:o,u=e.dx,l=void 0===u?0:u,v=e.dy,m=void 0===v?0:v,f=e.radius,s=void 0===f?this.PARAMS.emitter_size||.5:f,c=i<2?i:i/this.canvas.width,d=a<2?a:a/this.canvas.height,p=c*this.canvas.width,g=d*this.canvas.height;0===n.r&&0===n.g&&0===n.b&&console.warn("⚠️ createSplat() warning: Pure black (0,0,0) will not be visible due to additive blending. Use dark gray instead (e.g., {r:5, g:5, b:5})");var b={r:n.r/255,g:n.g/255,b:n.b/255};this._splatAPI.splat(p,g,l,m,b,s)}else console.error("❌ createSplat() error: activate() must be called before using createSplat()")}},{key:"setDitherURL",value:function(e){(0,i.setDitherURL)(e)}}],r&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}()}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var o=r[t]={exports:{}};return e[t](o,o.exports,n),o.exports}return n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(509)})());