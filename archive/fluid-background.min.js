(function(){'use strict';class FluidBackground{constructor(e={}){this.p=new Array(512);const t=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let i=0;i<256;i++)this.p[256+i]=this.p[i]=t[i];this.options={containerId:e.containerId||'fluid-background',width:e.width||window.innerWidth,height:e.height||window.innerHeight};this.canvas=null;this.ctx=null;this.cells=[];this.glowPositions=[];this.breatheOffset=0;this.animationId=null;this.mouseX=0;this.mouseY=0;this.init()}init(){let e=document.getElementById(this.options.containerId);if(!e){e=document.createElement('div');e.id=this.options.containerId;document.body.insertBefore(e,document.body.firstChild)}this.setupStyles(e);this.setupCanvas(e);this.setup();this.setupEventListeners();this.animate()}setupStyles(e){const t=`#${this.options.containerId}{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;overflow:hidden;pointer-events:none}#${this.options.containerId} canvas{position:absolute;top:0;left:0;width:100%;height:100%}`;if(!document.getElementById('fluid-bg-styles')){const e=document.createElement('style');e.id='fluid-bg-styles';e.textContent=t;document.head.appendChild(e)}}setupCanvas(e){this.canvas=document.createElement('canvas');this.ctx=this.canvas.getContext('2d');e.appendChild(this.canvas);this.resizeCanvas()}resizeCanvas(){this.canvas.width=window.innerWidth;this.canvas.height=window.innerHeight}setup(){for(let e=0;e<120;e++)this.cells.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,size:Math.random()*160+20,hue:Math.random()*100+180,sat:Math.random()*50+40,bright:Math.random()*30+60,alpha:Math.random()*50+30,offsetX:Math.random()*60-30,offsetY:Math.random()*60-30});for(let e=0;e<40;e++)this.cells.push({x:Math.random()*(this.canvas.width*.4)+this.canvas.width*.3,y:Math.random()*(this.canvas.height*.4)+this.canvas.height*.4,size:Math.random()*85+15,hue:Math.random()*40+20,sat:Math.random()*25+70,bright:Math.random()*15+80,alpha:Math.random()*35+50,offsetX:Math.random()*40-20,offsetY:Math.random()*40-20});for(let e=0;e<25;e++)this.cells.push({x:Math.random()*(this.canvas.width*.6)+this.canvas.width*.2,y:Math.random()*(this.canvas.height*.6)+this.canvas.height*.3,size:Math.random()*50+10,hue:Math.random()*40+300,sat:Math.random()*25+60,bright:Math.random()*20+70,alpha:Math.random()*35+40,offsetX:Math.random()*30-15,offsetY:Math.random()*30-15})}setupEventListeners(){window.addEventListener('resize',()=>{this.resizeCanvas()});document.addEventListener('mousemove',e=>{this.mouseX=e.clientX;this.mouseY=e.clientY;this.mouseMoved()})}animate(){this.ctx.fillStyle=this.hslToRgb(220,15,85);this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);this.breatheOffset+=.02;for(let e of this.cells){const t=Math.sqrt(Math.pow(this.mouseX-(e.x+e.offsetX),2)+Math.pow(this.mouseY-(e.y+e.offsetY),2));const i=this.map(this.constrain(t,0,150),0,150,1.5,1);const s=this.map(this.constrain(t,0,100),0,100,25,0);const n=Math.sin(this.breatheOffset+e.x*.01+e.y*.01)*.1+1;const a=e.alpha/100*n*i;this.ctx.fillStyle=this.hslaToRgba(e.hue,e.sat,e.bright*n*i,a);const o=8;const h=Math.PI*2/o;this.ctx.beginPath();for(let t=0;t<o;t++){const s=h*t;const a=this.noise(e.x*.01+Math.cos(s),e.y*.01+Math.sin(s),this.breatheOffset*.005);const r=e.size*(.7+.3*a);const c=e.x+e.offsetX+Math.cos(s)*r*i;const l=e.y+e.offsetY+Math.sin(s)*r*i;if(t===0)this.ctx.moveTo(c,l);else this.ctx.lineTo(c,l)}this.ctx.closePath();this.ctx.fill();if(s>0){const t=s/100;this.ctx.fillStyle=this.hslaToRgba(e.hue,e.sat*.6,Math.min(100,e.bright*1.3),t);const n=e.size*i*1.4;this.ctx.beginPath();this.ctx.arc(e.x+e.offsetX,e.y+e.offsetY,n,0,Math.PI*2);this.ctx.fill()}}this.ctx.strokeStyle=this.hslaToRgba(200,20,90,.15);this.ctx.lineWidth=1;for(let e=0;e<this.cells.length-1;e+=3){const t=this.cells[e];const i=this.cells[e+1];const s=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));if(s<120){this.ctx.beginPath();this.ctx.moveTo(t.x+t.offsetX,t.y+t.offsetY);this.ctx.lineTo(i.x+i.offsetX,i.y+i.offsetY);this.ctx.stroke()}}this.animationId=requestAnimationFrame(()=>this.animate())}mouseMoved(){this.glowPositions.push({x:this.mouseX,y:this.mouseY,life:20,maxLife:20});if(this.glowPositions.length>5)this.glowPositions.shift()}constrain(e,t,i){return Math.max(t,Math.min(i,e))}map(e,t,i,s,n){return s+(n-s)*((e-t)/(i-t))}noise(e,t,i=0){const s=Math.floor(e)&255;const n=Math.floor(t)&255;const a=Math.floor(i)&255;e-=Math.floor(e);t-=Math.floor(t);i-=Math.floor(i);const o=this.fade(e);const h=this.fade(t);const r=this.fade(i);const c=this.p[s]+n;const l=this.p[c]+a;const d=this.p[c+1]+a;const u=this.p[s+1]+n;const f=this.p[u]+a;const m=this.p[u+1]+a;return this.lerp(this.lerp(this.lerp(this.grad(this.p[l],e,t,i),this.grad(this.p[f],e-1,t,i),o),this.lerp(this.grad(this.p[d],e,t-1,i),this.grad(this.p[m],e-1,t-1,i),o),h),this.lerp(this.lerp(this.grad(this.p[l+1],e,t,i-1),this.grad(this.p[f+1],e-1,t,i-1),o),this.lerp(this.grad(this.p[d+1],e,t-1,i-1),this.grad(this.p[m+1],e-1,t-1,i-1),o),h),r)}fade(e){return e*e*e*(e*(e*6-15)+10)}lerp(e,t,i){return e+i*(t-e)}grad(e,t,i,s){const n=e&15;const a=n<8?t:i;const o=n<4?i:n===12||n===14?t:s;return((n&1)===0?a:-a)+((n&2)===0?o:-o)}hslToRgb(e,t,i){e=e/360;t=t/100;i=i/100;let s,n,a;if(t===0){s=n=a=i}else{const o=(e,t,i)=>{if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*(2/3-i)*6;return e};const h=i<.5?i*(1+t):i+t-i*t;const r=2*i-h;s=o(r,h,e+1/3);n=o(r,h,e);a=o(r,h,e-1/3)}return`rgb(${Math.round(s*255)}, ${Math.round(n*255)}, ${Math.round(a*255)})`}hslaToRgba(e,t,i,s){e=e/360;t=t/100;i=i/100;let n,a,o;if(t===0){n=a=o=i}else{const s=(e,t,i)=>{if(i<0)i+=1;if(i>1)i-=1;if(i<1/6)return e+(t-e)*6*i;if(i<1/2)return t;if(i<2/3)return e+(t-e)*(2/3-i)*6;return e};const h=i<.5?i*(1+t):i+t-i*t;const r=2*i-h;n=s(r,h,e+1/3);a=s(r,h,e);o=s(r,h,e-1/3)}return`rgba(${Math.round(n*255)}, ${Math.round(a*255)}, ${Math.round(o*255)}, ${s})`}destroy(){if(this.animationId)cancelAnimationFrame(this.animationId);if(this.canvas&&this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas)}}window.FluidBackground=FluidBackground;document.addEventListener('DOMContentLoaded',()=>{const e=document.querySelector('[data-fluid-background]');if(e){const t=e.dataset.fluidBackground?JSON.parse(e.dataset.fluidBackground):{};new FluidBackground(t)}})})();
